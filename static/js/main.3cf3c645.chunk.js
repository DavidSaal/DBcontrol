(this.webpackJsonpDBcontrol=this.webpackJsonpDBcontrol||[]).push([[0],{27:function(e,t,c){},29:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),s=c(12),r=c.n(s),o=c(14),d=c(5),l=c(6),i=c(2),j=c.n(i),b=c(7),u=c(3),h=c(13),p=c(0),x=function(e){return Object(p.jsx)("div",{className:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(p.jsx)("div",{className:"modal-dialog  modal-xl modal-dialog-centered",children:Object(p.jsxs)("div",{className:"modal-content",children:[Object(p.jsxs)("div",{className:"modal-header",children:[Object(p.jsx)("h5",{className:"modal-title fs-4",id:"exampleModalLabel",children:"Edit Row"}),Object(p.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(p.jsx)("div",{className:"card p-3",children:Object(p.jsxs)("table",{className:"table",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"col",children:"#"}),Object(p.jsx)("th",{scope:"col",children:"Customer name"}),Object(p.jsx)("th",{scope:"col",children:"Partner name"}),Object(p.jsx)("th",{scope:"col",children:"Type of work"}),Object(p.jsx)("th",{scope:"col",children:"N\xb0 MPR file"}),Object(p.jsx)("th",{scope:"col"})]})}),Object(p.jsx)("tbody",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row",children:"1"}),Object(p.jsx)("td",{children:Object(p.jsx)("input",{type:"text",name:"cName",className:"w-100",value:e.rowToUpdate.cName,onChange:e.rowToUpdateFunc})}),Object(p.jsx)("td",{children:Object(p.jsx)("input",{type:"text",name:"pName",className:"w-100",value:e.rowToUpdate.pName,onChange:e.rowToUpdateFunc})}),Object(p.jsx)("td",{children:Object(p.jsx)("input",{type:"text",name:"type",className:"w-100",value:e.rowToUpdate.type,onChange:e.rowToUpdateFunc})}),Object(p.jsx)("td",{children:Object(p.jsx)("input",{type:"text",name:"mpr",className:"w-100",value:e.rowToUpdate.mpr,onChange:e.rowToUpdateFunc})}),Object(p.jsx)("td",{children:Object(p.jsx)("button",{className:"btn btn-outline-dark shadow-sm fs-6 p-0 px-2","data-bs-dismiss":"modal",onClick:e.updatedRow,children:"Update"})})]})})]})})]})})})};c(27);var m=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(!0),r=Object(u.a)(s,2),i=r[0],m=r[1],O=Object(a.useState)({cName:"",pName:"",type:"",mpr:""}),f=Object(u.a)(O,2),v=f[0],N=f[1],w=Object(a.useState)({}),y=Object(u.a)(w,2),g=y[0],C=y[1],k=Object(a.useState)(!1),T=Object(u.a)(k,2),U=T[0],E=T[1],S=Object(a.useState)({name:"",value:""}),L=Object(u.a)(S,2),M=L[0],R=L[1],F=Object(a.useRef)(null),P=function(){var e=Object(b.a)(j.a.mark((function e(){var t,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://dbcontrol-server.herokuapp.com");case 2:return t=e.sent,e.next=5,t.json();case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){P().then((function(e){m(!1),n(e)}))}),[]),Object(a.useEffect)((function(){var e=F.current;e&&e.click(),E(!1)}),[U]);var _=function(e){var t=e.target,c=t.name,a=t.value;N(Object(l.a)(Object(l.a)({},v),{},Object(d.a)({},c,a)))},J=function(e){var t=e.target,c=t.name,a=t.value;C(Object(l.a)(Object(l.a)({},g),{},Object(d.a)({},c,a)))},D=function(e){var t=e.target,c=t.name,a=t.value;R({name:c,value:a})},B=function(){var e=Object(b.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,fetch("https://dbcontrol-server.herokuapp.com",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({newRow:v})});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,200===t.status?n([].concat(Object(o.a)(c),[a])):404===t.status&&alert("Error saving to database."),m(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(j.a.mark((function e(){var t,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,fetch("https://dbcontrol-server.herokuapp.com",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({rowToUpdate:g})});case 3:200===(t=e.sent).status?(a=c.findIndex((function(e){return e._id===g._id})),c[a]=g):404===t.status&&alert("Error saving to database."),m(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(b.a)(j.a.mark((function e(t){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,fetch("https://dbcontrol-server.herokuapp.com",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.target.id})});case 3:200===(a=e.sent).status?n(c.filter((function(e){return e._id!==t.target.id}))):405===a.status&&alert("Error deleting."),m(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("div",{className:"text-center my-5",children:Object(p.jsx)("div",{className:"card shadow",children:Object(p.jsx)("div",{className:"card-body",children:Object(p.jsx)("h1",{className:"display-5",children:"Data List"})})})}),Object(p.jsx)("div",{className:"card p-3",children:Object(p.jsxs)("table",{className:"table",children:[Object(p.jsxs)("thead",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:Object(p.jsx)("h4",{className:"fs-5 mb-1",children:"Filter"})}),Object(p.jsx)("td",{children:Object(p.jsx)("input",{type:"text",name:"cName",className:"w-50 shadow-sm btn-outline-success",onChange:D})}),Object(p.jsx)("td",{children:Object(p.jsx)("input",{type:"text",name:"pName",className:"w-50 shadow-sm btn-outline-success",onChange:D})}),Object(p.jsx)("td",{children:Object(p.jsx)("input",{type:"text",name:"type",className:"w-50 shadow-sm btn-outline-success",onChange:D})}),Object(p.jsx)("td",{children:Object(p.jsx)("input",{type:"text",name:"mpr",className:"w-50 shadow-sm btn-outline-success",onChange:D})})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"col",children:"#"}),Object(p.jsx)("th",{scope:"col",children:"Customer name"}),Object(p.jsx)("th",{scope:"col",children:"Partner name"}),Object(p.jsx)("th",{scope:"col",children:"Type of work"}),Object(p.jsx)("th",{scope:"col",children:"N\xb0 MPR file"}),Object(p.jsx)("th",{scope:"col"})]})]}),Object(p.jsxs)("tbody",{children:[i?Object(p.jsx)("p",{className:"fs-4 text-center",children:"Loading.."}):c.length>0?c.filter((function(e){return M.name?e[M.name].toLowerCase().includes(M.value.toLowerCase()):e})).map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scope:"row",children:t+1}),Object(p.jsx)("td",{children:e.cName}),Object(p.jsx)("td",{children:e.pName}),Object(p.jsx)("td",{children:e.type}),Object(p.jsx)("td",{children:e.mpr}),Object(p.jsxs)("td",{children:[Object(p.jsx)(x,{rowToUpdate:g,rowToUpdateFunc:J,updatedRow:z}),Object(p.jsx)("button",{type:"button",className:"btn zoom","aria-label":"Edit",onClick:function(){return C(e),E(!0)},children:"\u270e"}),Object(p.jsx)("button",{type:"button",className:"d-none",ref:F,id:e._id,"data-bs-toggle":"modal","data-bs-target":"#exampleModal"}),Object(p.jsx)("button",{type:"button",className:"btn-close fs-8 zoom","aria-label":"Close",id:e._id,onClick:I})]})]},e._id)})):Object(p.jsx)("div",{className:"justify-content-center d-flex text-center",children:Object(p.jsx)("h4",{className:"fst-italic text-center",children:"(Empty List)"})}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:Object(p.jsx)("button",{className:"btn btn-outline-dark shadow-sm fs-6 p-0 px-1",onClick:B,children:"Add"})}),Object(p.jsx)("td",{children:Object(p.jsx)("input",{type:"text",name:"cName",value:v.cName,onChange:_})}),Object(p.jsx)("td",{children:Object(p.jsx)("input",{type:"text",name:"pName",value:v.pName,onChange:_})}),Object(p.jsx)("td",{children:Object(p.jsx)("input",{type:"text",name:"type",value:v.type,onChange:_})}),Object(p.jsx)("td",{children:Object(p.jsx)("input",{type:"text",name:"mpr",value:v.mpr,onChange:_})}),Object(p.jsx)("td",{children:Object(p.jsx)(h.CSVLink,{data:c,children:Object(p.jsx)("button",{className:"btn btn-outline-dark shadow-sm fs-6 p-0 px-1 ms-4",children:"Csv"})})})]})]})]})})]})};c(28);r.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(m,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.3cf3c645.chunk.js.map